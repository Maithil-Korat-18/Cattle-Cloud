<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login/Registration Form</title>
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">

</head>
<body>
    <div class="container">
        <div class="form-box login">
            <form id="loginForm">
                <h1>Login</h1>
                <div class="input-box">
                    <input type="text" placeholder="Email or Phone Number" required />
                    <i class="bx bxs-user"></i>
                </div>
                <div class="input-box">
                    <input type="password" placeholder="Password" required />
                    <i class="bx bxs-lock-alt"></i>
                </div>
                <div class="forgot-link">
                    <a href="#">Forgot Password?</a>
                </div>
                <button type="submit" class="btn">Login</button>
                <p>or login with</p>
                <div id="googleLoginDiv"></div>
                <div class="social-icons">
                    <a href="#" class="google" id="googleIconLogin"></a>
                </div>
            </form>
        </div>

        <!-- Forgot Password - Email Step -->
        <div class="form-box forgot-container" id="forgotEmailStep">
            <i class="bx bx-arrow-back back-arrow" id="forgotBackArrow"></i>
            <form id="forgotEmailForm">
                <h1>Reset Password</h1>
                <p style="font-size: 13px; color: #666; margin-bottom: 20px;">Enter your email to receive a verification code</p>
                <div class="input-box">
                    <input type="email" id="forgotEmail" placeholder="Email" required />
                    <i class="bx bxs-envelope"></i>
                </div>
                <div id="forgotEmailError" class="error-text" style="display: none;"></div>
                <button type="button" class="btn" id="sendResetCodeBtn">Send Reset Code</button>
            </form>
        </div>

        <!-- Forgot Password - Reset Password Step -->
        <div class="form-box forgot-container" id="forgotResetStep">
            <i class="bx bx-arrow-back back-arrow" id="resetBackArrow"></i>
            <form id="resetPasswordForm">
                <h1>Set New Password</h1>
                <div class="verification-message" style="margin-bottom: 20px;">
                    <i class="bx bx-check-circle"></i> Code verified successfully!
                </div>
                <div class="input-box">
                    <input type="password" id="newPassword" placeholder="New Password" required minlength="8" />
                    <i class="bx bxs-lock-alt"></i>
                </div>
                <div class="input-box">
                    <input type="password" id="confirmNewPassword" placeholder="Confirm New Password" required minlength="8" />
                    <i class="bx bxs-lock-alt"></i>
                </div>
                <div id="resetPasswordError" class="error-message" style="display: none;"></div>
                <button type="submit" class="btn">Reset Password</button>
            </form>
        </div>

        <div class="form-box register">
            <i class="bx bx-arrow-back back-arrow" id="backArrow" style="display: none;"></i>
            
            <!-- Step 1: Basic Info -->
            <div class="registration-step active-step" id="step1">
                <form id="step1Form">
                    <h1>Registration</h1>
                    <div class="input-box">
                        <input type="text" id="fullName" placeholder="Full Name" required />
                        <i class="bx bxs-user"></i>
                    </div>
                    <div class="input-box">
                        <input type="tel" id="phone" placeholder="Phone Number" required pattern="[0-9]{10}" />
                        <i class="bx bxs-phone"></i>
                    </div>
                    
                    <button type="submit" class="btn">Next</button>
                </form>
            </div>

            <!-- Step 2: Email Verification -->
            <div class="registration-step" id="step2">
                <form id="step2Form">
                    <h1>Email Verification</h1>
                    <div class="input-box">
                        <input type="email" id="email" placeholder="Email" required />
                        <i class="bx bxs-envelope"></i>
                    </div>
                    <div id="emailError" class="error-text" style="display: none;"></div>
                    <button type="button" class="btn" id="verifyEmailBtn">Verify Email</button>
                </form>
            </div>

            <!-- Step 3: Password Setup -->
            <div class="registration-step" id="step3">
                <form id="step3Form">
                    <h1>Set Password</h1>
                    <div class="input-box">
                        <input type="password" id="password" placeholder="Password" required minlength="8" />
                        <i class="bx bxs-lock-alt"></i>
                    </div>
                    <div class="input-box">
                        <input type="password" id="confirmPassword" placeholder="Confirm Password" required minlength="8" />
                        <i class="bx bxs-lock-alt"></i>
                    </div>
                    <div id="passwordError" class="error-message" style="display: none;"></div>
                    <button type="submit" class="btn">Complete Registration</button>
                </form>
            </div>
        </div>

        <div class="toggle-box">
            <div class="toggle-panel toggle-left">
                <h1>Hello, Welcome!</h1>
                <p>Don't have an account?</p>
                <button class="btn register-btn">Register</button>
            </div>

            <div class="toggle-panel toggle-right">
                <h1>Welcome Back!</h1>
                <p>Already have an account?</p>
                <button class="btn login-btn">Login</button>
            </div>
        </div>
    </div>

    <!-- Verification Popup for Registration -->
    <div class="popup-overlay" id="verificationPopup">
        <div class="popup-box">
            <h2>Enter Verification Code</h2>
            <p style="margin-bottom: 20px; font-size: 14px; color: #666;">We've sent a code to <span id="displayEmail" style="font-weight: 600;"></span></p>
            <div class="input-box">
                <input type="text" id="verificationCode" placeholder="Enter 6-digit code" maxlength="6" />
                <i class="bx bx-key"></i>
            </div>
            <button type="button" class="btn" id="verifyCodeBtn">Verify Code</button>
            <span class="change-email-link" id="changeEmailLink">Change Email</span>
        </div>
    </div>

    <!-- Forgot Password Verification Popup -->
    <div class="popup-overlay" id="forgotVerificationPopup">
        <div class="popup-box">
            <h2>Enter Reset Code</h2>
            <p style="margin-bottom: 20px; font-size: 14px; color: #666;">We've sent a reset code to <span id="displayForgotEmail" style="font-weight: 600;"></span></p>
            <div class="input-box">
                <input type="text" id="forgotVerificationCode" placeholder="Enter 6-digit code" maxlength="6" />
                <i class="bx bx-key"></i>
            </div>
            <button type="button" class="btn" id="verifyResetCodeBtn">Verify Code</button>
            <span class="change-email-link" id="changeForgotEmailLink">Change Email</span>
        </div>
    </div>
</body>
<script src="{{ url_for('static', filename='js/login.js') }}"></script>
</html>