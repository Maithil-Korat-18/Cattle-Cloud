<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Cattle Management System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="dashboard-body">
    <!-- Navigation Bar -->
    <nav class="navbar navbar-dashboard" id="navbar">
        <div class="nav-container">
            <div class="nav-left">
                <div class="logo">üêÑ</div>
                <span class="brand-name">Cattle Cloud</span>
            </div>
            <ul class="nav-menu" id="navMenu">
                <li><a href="{{ url_for('home') }}">Home</a></li>
                <li><a href="{{ url_for('dashboard') }}" class="active">Dashboard</a></li>
                <li><a href="/breeds">Breeds</a></li>
                <li><a href="/about">About</a></li>
                <li><a href="/contact">Contact</a></li>
            </ul>
            <div class="profile-dropdown">
                <button class="profile-btn" id="profileBtn">
                    <div class="profile-avatar">{{ username[0].upper() }}</div>
                    <span class="profile-name">{{ username }}</span>
                    <span class="dropdown-arrow">‚ñº</span>
                </button>
                <div class="dropdown-menu" id="dropdownMenu">
                    <a href="{{ url_for('profile') }}" class="dropdown-item">
                        <span>üë§</span>
                        <span>My Profile</span>
                    </a>
                    <a href="{{ url_for('logout') }}" class="dropdown-item">
                        <span>üö™</span>
                        <span>Logout</span>
                    </a>
                </div>
            </div>
            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Page Header -->
            <div class="page-header">
                <div>
                    <h1 class="page-title">Dashboard</h1>
                    <p class="page-subtitle">Comprehensive overview of your cattle farm operations</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary btn-small">üìä Export Report</button>
                    <button class="btn btn-primary btn-small">‚ûï Add Record</button>
                </div>
            </div>

            <!-- Summary Stats -->
            <div class="stats-row">
                <div class="stat-card-small">
                    <p class="stat-label">Total Cattle</p>
                    <p class="stat-number">{{ data.total_cattle }}</p>
                </div>
                <div class="stat-card-small">
                    <p class="stat-label">Avg Daily Milk</p>
                    <p class="stat-number">{{ (data.weekly_milk | sum / 7) | round(0) | int }}L</p>
                </div>
                <div class="stat-card-small">
                    <p class="stat-label">Healthy</p>
                    <p class="stat-number">{{ data.total_cattle - data.health_alerts }}</p>
                </div>
                <div class="stat-card-small">
                    <p class="stat-label">Need Attention</p>
                    <p class="stat-number">{{ data.health_alerts }}</p>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="dashboard-grid">
                <!-- Weekly Milk Production -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3>Weekly Milk Production</h3>
                        <select class="filter-select">
                            <option>This Week</option>
                            <option>Last Week</option>
                            <option>Last Month</option>
                        </select>
                    </div>
                    <div class="chart-container">
                        <canvas id="weeklyChart"></canvas>
                        <div class="bar-chart">
                            {% for value in data.weekly_milk %}
                            <div class="bar-wrapper">
                                <div class="bar" style="height: {{ (value / 200) * 100 }}%">
                                    <span class="bar-value">{{ value }}L</span>
                                </div>
                                <span class="bar-x-label">Day {{ loop.index }}</span>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <!-- Monthly Milk Trend -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3>Monthly Milk Trend</h3>
                        <select class="filter-select">
                            <option>Last 6 Months</option>
                            <option>Last Year</option>
                        </select>
                    </div>
                    <div class="chart-container">
                        <div class="line-chart">
                            {% for value in data.monthly_milk %}
                            <div class="line-point" style="bottom: {{ (value / 6000) * 100 }}%">
                                <div class="point-dot"></div>
                                <span class="point-value">{{ value }}L</span>
                            </div>
                            {% endfor %}
                        </div>
                        <div class="chart-labels">
                            <span>Aug</span>
                            <span>Sep</span>
                            <span>Oct</span>
                            <span>Nov</span>
                            <span>Dec</span>
                            <span>Jan</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cattle List -->
            <div class="dashboard-card full-width">
                <div class="card-header">
                    <h3>Cattle Inventory</h3>
                    <div class="card-actions">
                        <input type="text" placeholder="Search cattle..." class="search-input">
                        <button class="btn btn-primary btn-small">‚ûï Add Cattle</button>
                    </div>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Breed</th>
                                <th>Age</th>
                                <th>Health Status</th>
                                <th>Milk Today</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for cattle in data.cattle_list %}
                            <tr>
                                <td><strong>{{ cattle.id }}</strong></td>
                                <td>{{ cattle.name }}</td>
                                <td>{{ cattle.breed }}</td>
                                <td>{{ cattle.age }} years</td>
                                <td>
                                    <span class="status-badge status-{{ cattle.health.lower() }}">
                                        {{ cattle.health }}
                                    </span>
                                </td>
                                <td>{{ cattle.milk_today }}L</td>
                                <td>
                                    <button class="btn-icon" title="View Details">üëÅÔ∏è</button>
                                    <button class="btn-icon" title="Edit">‚úèÔ∏è</button>
                                    <button class="btn-icon" title="Delete">üóëÔ∏è</button>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Health Records -->
            <div class="dashboard-grid-2">
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3>Recent Health Records</h3>
                        <a href="#" class="view-all-link">View All ‚Üí</a>
                    </div>
                    <div class="records-list">
                        {% for record in data.health_records %}
                        <div class="record-item">
                            <div class="record-icon">
                                {% if record.status == 'Completed' %}
                                ‚úÖ
                                {% else %}
                                ‚è≥
                                {% endif %}
                            </div>
                            <div class="record-content">
                                <p class="record-title">{{ record.issue }} - {{ record.cattle_id }}</p>
                                <p class="record-meta">{{ record.date }} ‚Ä¢ {{ record.status }}</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <div class="dashboard-card">
                    <div class="card-header">
                        <h3>Feed Inventory</h3>
                        <a href="#" class="view-all-link">View All ‚Üí</a>
                    </div>
                    <div class="records-list">
                        {% for feed in data.feed_records %}
                        <div class="record-item">
                            <div class="record-icon">üåæ</div>
                            <div class="record-content">
                                <p class="record-title">{{ feed.type }} - {{ feed.quantity }}</p>
                                <p class="record-meta">{{ feed.date }} ‚Ä¢ {{ feed.cost }}</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <h3>Quick Actions</h3>
                <div class="action-buttons">
                    <button class="action-btn">
                        <span class="action-icon">üìù</span>
                        <span>Record Milk</span>
                    </button>
                    <button class="action-btn">
                        <span class="action-icon">üíâ</span>
                        <span>Add Health Record</span>
                    </button>
                    <button class="action-btn">
                        <span class="action-icon">üåæ</span>
                        <span>Update Feed</span>
                    </button>
                    <button class="action-btn">
                        <span class="action-icon">üêÑ</span>
                        <span>Add Cattle</span>
                    </button>
                    <button class="action-btn">
                        <span class="action-icon">üìä</span>
                        <span>Generate Report</span>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer-simple">
        <div class="container">
            <p>&copy; 2024 CattleTrack Pro. All rights reserved.</p>
        </div>
    </footer>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>